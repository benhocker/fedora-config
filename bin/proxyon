#!/bin/bash

url=$1
extra_domains=$2
stock_domains="localhost,127.0.0.1,localaddress,.localdomain.com"

if [ ! -z $extra_domains ]; then
  domains="$stock_domains,$extra_domains"
else
  domains=$stock_domains
fi

echo -e "Setting proxy to $url"
echo -e "Adding $extra_domains to no_proxy"
echo "export no_proxy=$domains"
echo "export NO_PROXY=$domains"
echo "export http_proxy=$url"
echo "export HTTP_PROXY=$url"
echo "export https_proxy=$url"
echo "export HTTPS_PROXY=$url"
echo "export ftp_proxy=$url"
echo "export FTP_PROXY=$url"
echo "export rsync_proxy=$url"
echo "export RSYNC_PROXY=$url"
echo -e "Proxy environment variable set."
